<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" >
<head>
<title>User Reference:EEGLabImport - BCI2000 Help</title>
<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<meta name="keywords" content="User Reference:EEGLabImport" />
<link rel="shortcut icon" href="../../favicon.ico" />
<link rel='stylesheet' type='text/css' media='print' href='../skins/common/wikiprintable.css' />
<link rel="stylesheet" href="../skins/common/wikistandard.css@1" type="text/css" />
<link rel="stylesheet" href="../skins/common/common.css" type="text/css" />
<link rel="stylesheet" href="../skins/common/htmlhelp.css" type="text/css" />

<style type='text/css'>
a.new, #quickbar a.new { color: #CC2200; }
.editsection { display: none; }
#quickbar { position: absolute; top: 4px; left: 4px;  }
#article { margin-left: 152px; margin-right: 4px; }
</style>
</head>

<body bgcolor='#FFFFFF'>

<div id='content'>
<div id='topbar'>
<table border='0' cellspacing='0' width='98%'>
<tr>
</tr>
</table>
</div>

<div id='article'>
<h1 class="pagetitle">EEGLabImport</h1><p class="subtitle">User Reference</p><hr class="sep" /><table id="toc" class="toc" summary="Contents"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class='toclevel-1'><a href="User_Reference%253AEEGLabImport.html#Synopsis"><span class="tocnumber">1</span> <span class="toctext">Synopsis</span></a></li>
<li class='toclevel-1'><a href="User_Reference%253AEEGLabImport.html#Prerequisites"><span class="tocnumber">2</span> <span class="toctext">Prerequisites</span></a></li>
<li class='toclevel-1'><a href="User_Reference%253AEEGLabImport.html#Installing_EEGLabImport"><span class="tocnumber">3</span> <span class="toctext">Installing EEGLabImport</span></a></li>
<li class='toclevel-1'><a href="User_Reference%253AEEGLabImport.html#Using_EEGLabImport"><span class="tocnumber">4</span> <span class="toctext">Using EEGLabImport</span></a></li>
<li class='toclevel-1'><a href="User_Reference%253AEEGLabImport.html#Tutorial"><span class="tocnumber">5</span> <span class="toctext">Tutorial</span></a>
<ul>
<li class='toclevel-2'><a href="User_Reference%253AEEGLabImport.html#Load_the_TestData.dat_Data_Set"><span class="tocnumber">5.1</span> <span class="toctext">Load the TestData.dat Data Set</span></a></li>
<li class='toclevel-2'><a href="User_Reference%253AEEGLabImport.html#Import_the_Channel_Location_File"><span class="tocnumber">5.2</span> <span class="toctext">Import the Channel Location File</span></a></li>
<li class='toclevel-2'><a href="User_Reference%253AEEGLabImport.html#Extracting_Epochs"><span class="tocnumber">5.3</span> <span class="toctext">Extracting Epochs</span></a></li>
<li class='toclevel-2'><a href="User_Reference%253AEEGLabImport.html#Extracting_Task-Specific_Conditions"><span class="tocnumber">5.4</span> <span class="toctext">Extracting Task-Specific Conditions</span></a></li>
<li class='toclevel-2'><a href="User_Reference%253AEEGLabImport.html#Analyzing_the_Data"><span class="tocnumber">5.5</span> <span class="toctext">Analyzing the Data</span></a>
<ul>
<li class='toclevel-3'><a href="User_Reference%253AEEGLabImport.html#Channel_Spectra_and_Maps"><span class="tocnumber">5.5.1</span> <span class="toctext">Channel Spectra and Maps</span></a></li>
<li class='toclevel-3'><a href="User_Reference%253AEEGLabImport.html#Channel_ERP_Analysis"><span class="tocnumber">5.5.2</span> <span class="toctext">Channel ERP Analysis</span></a></li>
</ul>
</li>
<li class='toclevel-2'><a href="User_Reference%253AEEGLabImport.html#Further_Information"><span class="tocnumber">5.6</span> <span class="toctext">Further Information</span></a></li>
</ul>
</li>
</ul>
</td></tr></table>
<a name="Synopsis"></a><h2>Synopsis</h2>
<p>EEGLabImport is a plugin for EEGLAB that allows importing data, including the recorded signal and event 
markers, in the BCI2000 data format.
Data from multiple runs 
can be concatenated and imported simultaneously, greatly extending and simplifying the analysis of EEG and 
ECoG based data sets. Further information about EEGLAB can be found at: <a href="http://sccn.ucsd.edu/eeglab/" class='external free' title="http://sccn.ucsd.edu/eeglab/" rel="nofollow">http://sccn.ucsd.edu/eeglab/</a>.
</p>
<a name="Prerequisites"></a><h2>Prerequisites</h2>
<p>BCI2000import requires Matlab 7.0 or greater, with a current version of EEGLAB. Depending on the size of the 
data sets, a large amount of RAM may also be required, due to resource requirements of Matlab. 512 MB is 
probably the minimum that allows the system to be usable. 
</p>
<a name="Installing_EEGLabImport"></a><h2>Installing EEGLabImport</h2>
<p>Installation of the plugin is straightforward, but may require compiling the <tt>load_bcidat</tt> MEX function for your platform.
</p>
<ol><li>If you are using a 32-bit version ofWindows, <tt>load_bcidat.mexw32</tt> is likely already compiled for your platform, and can be located in the <tt>BCI2000/tools/mex/</tt> folder. Copy this file to the <tt>BCI2000/tools/EEGLabImport</tt> folder, and skip to 5.
</li><li>If you are using a platform for which a version of <tt>load_bcidat</tt> does not exist in the <tt>/tools/mex</tt> folder, the <tt>load_bcidat</tt> MEX file must be compiled.
</li><li>Open Matlab, and navigate to <tt>BCI2000/src/core/Tools/mex/</tt>. Type <tt>buildmex</tt> at the command line; this will build the BCI2000 MEX functions for your platform.
</li><li>Once the build process is complete, locate the <tt>load_bcidat</tt> file for your platform based on its extension (see the Matlab MEX documentation for more details), and copy it to <tt>BCI2000/tools/EEGLabImport</tt>.
</li><li>Copy the folder <tt>BCI2000/tools/EEGLabImport</tt> to the EEGLab plugin folder, located at <tt>eeglab/plugins</tt>.
</li></ol>
<p>When EEGLAB is started, the plugin will be automatically detected and installed.
</p>
<a name="Using_EEGLabImport"></a><h2>Using EEGLabImport</h2>
<p>Begin a Matlab session, and start EEGLAB by typing <i>eeglab</i> at the command prompt. EEGLabImport is 
detected and added to the menus automatically.  
Go to File-&gt;Import Data-&gt;BCI2000 Data to start the data import program. A file-select 
dialog is presented, in which multiple BCI2000 data files can be selected (see figure below). The default file extension 
for BCI2000 data files is *.dat. Select one or more files from the desired folder, and press Open. 
</p><p><a href="../images/9/91/EEGLabImport1.PNG" class="image" title="The EEGLabImport program. Multiple files have been selected in this example."><img src="../images/9/91/EEGLabImport1.PNG" alt="The EEGLabImport program. Multiple files have been selected in this example." width="844" height="353" longdesc="/wiki/index.php/Image:EEGLabImport1.PNG" /></a>
</p><p>After pressing Open, the program loads the selected data, including the signal, states, and testing parameters 
such as the sampling rate. Next, a window will appear asking which BCI2000 states should be imported as 
EEGLAB events. Several important and common states will automatically be selected, but it is not required to 
import these. These events are used to generate signal epochs, which are then used for signal averaging and 
other more complex analyses. Each event relates to a different experimental event, some of which are 
described below. 
</p>
<ul><li><b>TargetCode</b> – This state gives the target number that was displayed to the subject during each trial. In cases where only 2 targets are presented, this will have a value of either 1 or 2. EEGLAB stores the TargetCode as a single event, and does not discriminate between different values. Therefore, once the data is imported, it is necessary to create new, separate events for each TargetCode value in EEGLAB using the Edit-&gt;Select Epochs/Events menu. Refer to the EEGLAB documentation for more information. 
</li><li><b>ResultCode</b> – This is related to the TargetCode state, but tells how the user actually performed on the task. If the user was able to move the cursor to the correct Target, then the ResultCode is the same as the TargetCode for that trial. Otherwise, it will be different. This is useful if you only want to select trials that result in a hit. 
</li><li><b>Feedback</b> – This event gives the time at which the user is first presented with visual feedback of the cursor. This often does not coincide with the appearance of the target, and you may want to average on the Feedback state instead of TargetCode. 
</li><li><b>IntertrialInterval</b> – This event gives the period of time in between trials, and may be useful to determine a baseline state of the signal. 
</li></ul>
<p>Once the desired events are selected, EEGLabImport removes the undesired states, and finishes importing the 
data into EEGLAB. 
</p><p>The final step is to give the dataset a name, and to optionally save the file in the EEGLAB format for 
future analysis:
</p><p><a href="../images/d/dd/EEGLabImport2.PNG" class="image" title="Window to enter the dataset name, and optionally save the file in EEGLAB format."><img src="../images/d/dd/EEGLabImport2.PNG" alt="Window to enter the dataset name, and optionally save the file in EEGLAB format." width="670" height="139" longdesc="/wiki/index.php/Image:EEGLabImport2.PNG" /></a>
</p>
<a name="Tutorial"></a><h2>Tutorial</h2>
<p>This tutorial covers some of the basics of using EEGLAB to analyze data from a BCI experiment. The sample 
data set used for this is included in the EEGLabImport folder, and is called TestData.dat. This data set 
consists of a BCI cursor control session in which the 10-Hz component of one channel was modulated with a 
function generator to simulate alpha brain activity during a BCI task. The amplitude of the 10-Hz component 
was translated into vertical cursor velocity, as in a real BCI cursor task. 
</p>
<a name="Load_the_TestData.dat_Data_Set"></a><h3>Load the TestData.dat Data Set</h3>
<p>Start EEGLAB in Matlab. Go to File-&gt;Import Data-&gt;BCI2000 Data, and find the TestData.dat file (which 
should be in the EEGLabImport folder, or the eeglab/sample_data folder). Select the following BCI events to 
import: 
</p>
<ul><li>TargetCode 
</li><li>ResultCode 
</li><li>Feedback 
</li><li>IntertrialInterval 
</li></ul>
<p>These events are needed to create epochs in EEGLAB. When asked, give the dataset the name “data1.” (Any 
name can be used, but the tutorial will refer to data1 from here on). 
</p>
<a name="Import_the_Channel_Location_File"></a><h3>Import the Channel Location File</h3>
<p>In order to utilize many of EEGLAB’s functions, it needs to know where each channel is located physically 
on the head. This is accomplished by loading a channel location file. An example file with locations for 16 
channels is included with the sample data set, and is called Cap17.locs. To import this file, in EEGLAB go to 
Edit-&gt;Channel Locations, which brings up the channel location edit window: 
</p><p><a href="../images/1/1d/EEGLabImport3.PNG" class="image" title="Channel Location Edit Window"><img src="../images/1/1d/EEGLabImport3.PNG" alt="Channel Location Edit Window" width="732" height="506" longdesc="/wiki/index.php/Image:EEGLabImport3.PNG" /></a>
</p><p>Press the Read Locations button in the lower-left hand corner, and select the Cap17.locs file in the 
eeglab/plugins/EEGLabImport/ folder. A window appears asking for the File Format; select 
"autodetect", and press OK. The channel locations are imported, and you can view the information for each 
electrode. The important electrode for this data set is number 5, which was imported as the C3 electrode. Press 
the OK button to close the channel edit window.
</p>
<a name="Extracting_Epochs"></a><h3>Extracting Epochs</h3>
<p>The next step is to break the data set down into epochs based on one or more events that were imported. The 
BCI task can be epoched in many ways, but the way it will be done here is by using the TargetCode as the 
event marker. To begin, in EEGLAB, go to Tools-&gt;Extract Epochs. There are several important values to be set 
in this window: 
</p><p><a href="../images/6/6e/EEGLabImport4.PNG" class="image" title="Extracting Data Epochs"><img src="../images/6/6e/EEGLabImport4.PNG" alt="Extracting Data Epochs" width="524" height="168" longdesc="/wiki/index.php/Image:EEGLabImport4.PNG" /></a>
</p><p>The first and most important value is the time-locking event, which is the event used to create epochs. In this 
example, we are using the TargetCode event. This can be typed in, or pressing the […] button will show all 
available events.  
</p><p>The next value to set is the epoch limits. This determines the time ranges to keep before and after each event 
occurs. 
</p><p><b>Note:</b> These values <i>will</i> be different depending on how the experiment was setup, based on 
the pretrial pause and the duration of each trial. In this data set, a pretrial pause of 1.25 s was used, and 
each trial lasted 2.5 s. Therefore, a time range of 0 to 3.75 seconds (1.25 s+ 2.5 s) will be used; the time from 
0 to 1.25 s will later be specified as the baseline range. Type 0 3.75 in the Epochs limits box.  
</p><p>Finally, the name of the new dataset should be specified in the 3rd box. The default value of data1 epochs is 
fine. The window should appear like this now: 
</p><p><a href="../images/c/ca/EEGLabImport5.PNG" class="image" title="Extracting epochs"><img src="../images/c/ca/EEGLabImport5.PNG" alt="Extracting epochs" width="526" height="173" longdesc="/wiki/index.php/Image:EEGLabImport5.PNG" /></a> 
</p><p>Press the OK button to finish. When asked for a new dataset name, make sure it is "data1 epochs", and press OK. 
A new dataset with that name is created and activated. An important note to make here is that EEGLAB does not 
write over old datasets when operations are performed, but creates an entirely new set. Therefore, the set we 
just created is given an index of 2; the currently selected dataset can be changed in EEGLAB in the Datasets 
menu. The final box presented is the baseline removal box, which specifies the region of the epoch which is 
baseline. For this, enter 0 1.25, to specify the baseline from time 0 to 1.25 s.
</p>
<a name="Extracting_Task-Specific_Conditions"></a><h3>Extracting Task-Specific Conditions</h3>
<p>In the BCI cursor control task, there are actually several conditions that can be observed based on the value of 
the TargetCode. Extracting the epochs in Step 3 created a dataset based on all values of TargetCode, while we 
actually want to separate the different conditions. This is done easily in EEGLAB by going to the Edit-&gt;Select 
Epochs/Events menu: 
</p><p><a href="../images/0/07/EEGLabImport6.PNG" class="image" title="Selecting Task-specific Epoch"><img src="../images/0/07/EEGLabImport6.PNG" alt="Selecting Task-specific Epoch" width="875" height="418" longdesc="/wiki/index.php/Image:EEGLabImport6.PNG" /></a>
</p><p>There are two important fields for us to use: the position and the type fields. The type field is where you 
specify the event that you want to select, which is the TargetCode (enter this into the type field). The position 
is the value of the TargetCode that you want to keep; we will be creating data sets for both TargetCodes used 
in the BCI task, 1 and 2. For this step, enter 1 into the position field, and press OK. It will ask you to confirm 
deleting some of the epochs, which is what we want, so press OK. Next, a new window appears asking for the 
Dataset name; enter data1 epochs T1, since the TargetCode with a value of 1 was kept. This creates yet 
another new dataset, this with an index of 3. 
</p><p>Now, we need to create another dataset that contains the information for TargetCode 2. Remember, 
though, that the currently selected dataset removed all of this information, so we need to select a previous data 
set with ALL info. Go to Datasets-&gt;Dataset2: Data1 Epochs in eeglab. This selects the old epoched data. 
Now, repeat the above steps, going to Edit Select Epochs/Events, and enter TargetCode for type and 2 for 
position. Press Ok, confirm deleting the other epochs, and give the Dataset the name data1 epochs T2.  We 
now have separate datasets for each condition, which can be analyzed separately, or compared to each other.
</p>
<a name="Analyzing_the_Data"></a><h3>Analyzing the Data</h3>
<p>It would be impossible to go through every aspect of EEGLAB in this tutorial, so I will cover a few of the basic 
ones to get started. 
</p>
<a name="Channel_Spectra_and_Maps"></a><h4>Channel Spectra and Maps </h4>
<p>One of the simplest functions to use in EEGLAB and one of the most useful for BCI research is analyzing the 
spectral content of the data during different conditions. To look at the channel spectra for each condition, start 
by selecting the dataset for TargetCode1 (Datasets-&gt;Dataset3…). Go to Plot-&gt;Channel Spectra and Maps. 
This brings up a window with several options:
</p><p><a href="../images/f/f7/EEGLabImport7.PNG" class="image" title="Spectral mapping window"><img src="../images/f/f7/EEGLabImport7.PNG" alt="Spectral mapping window" width="499" height="220" longdesc="/wiki/index.php/Image:EEGLabImport7.PNG" /></a>
</p><p>Because we are interested in what happened during the trial, change the start time to 1250 ms, and leave the 
end time the same; the omits the baseline activity before the cursor appears. Since this is a small dataset, set 
Percent data to sample to 100. Set the Frequencies to plot as scalp maps to '6 10 22' (this will become more 
clear shortly). Finally, in the last box, change the ‘electrodes’ option to ‘on.’ Press OK. The following plot is 
produced: 
</p><p><a href="../images/thumb/b/bb/EEGLabImport8.PNG/400px-EEGLabImport8.PNG" class="image" title="Spectral plot and maps for all channels for TargetCode = 1"><img src="../images/thumb/b/bb/EEGLabImport8.PNG/400px-EEGLabImport8.PNG" alt="Spectral plot and maps for all channels for TargetCode = 1" width="400" height="393" longdesc="/wiki/index.php/Image:EEGLabImport8.PNG" /></a>
</p><p>Note that in this figure, the scalp maps are <b>not</b> normalized to each other; the red in the 10 Hz figure is much 
larger than the red in the other two figures. To compensate for this, find out what the maximum range is by 
clicking on the scalp map, which will open a new figure:
</p><p><a href="../images/thumb/d/d5/EEGLabImport9.PNG/400px-EEGLabImport9.PNG" class="image" title="Spectral map for 10 Hz"><img src="../images/thumb/d/d5/EEGLabImport9.PNG/400px-EEGLabImport9.PNG" alt="Spectral map for 10 Hz" width="400" height="337" longdesc="/wiki/index.php/Image:EEGLabImport9.PNG" /></a>
</p><p>Press the Colorbar button (under the Window and Help menus) to find out what the range is in this figure (it is about -25 to +25).
Now, go to Plot-&gt;Channel Spectra and Maps again, and enter the same options as before. Now, next to 
‘electrodes’,’on’, add ‘maplimits’,[-25 25]:
</p><p><a href="../images/2/24/EEGLabImport10.PNG" class="image" title="Normalized Spectral Maps"><img src="../images/2/24/EEGLabImport10.PNG" alt="Normalized Spectral Maps" width="503" height="229" longdesc="/wiki/index.php/Image:EEGLabImport10.PNG" /></a>
</p><p>Press OK, and the new normalized figure is produced:
</p><p><a href="../images/thumb/7/71/EEGLabImport11.PNG/400px-EEGLabImport11.PNG" class="image" title="Normalized Spectral Maps"><img src="../images/thumb/7/71/EEGLabImport11.PNG/400px-EEGLabImport11.PNG" alt="Normalized Spectral Maps" width="400" height="396" longdesc="/wiki/index.php/Image:EEGLabImport11.PNG" /></a>
</p><p>One method of comparing between the two conditions would be look at the TargetCode 2 dataset using the 
same analysis and the same range (-25 to +25) as before, and seeing how the activation strength compares. 
The dataset4 was selected and analyzed exactly the same as before:
</p><p><a href="../images/thumb/6/6a/EEGLabImport12.PNG/400px-EEGLabImport12.PNG" class="image" title="Normalized spectral map for TargetCode = 2"><img src="../images/thumb/6/6a/EEGLabImport12.PNG/400px-EEGLabImport12.PNG" alt="Normalized spectral map for TargetCode = 2" width="400" height="372" longdesc="/wiki/index.php/Image:EEGLabImport12.PNG" /></a>
</p><p>Notice that the 10 Hz activation is much weaker for TargetCode = 2 than for TargetCode = 1.
</p>
<a name="Channel_ERP_Analysis"></a><h4>Channel ERP Analysis</h4>
<p>Another set of useful functions in EEGLAB are the ERP image functions. The EEGLAB tutorial covers these in- 
depth, so I will give a few quick examples here of how they might be used; refer to the EEGLAB tutorial for 
more information.  Select Dataset 3 (TargetCode = 1), and go to Plot-&gt;Channel ERP Image:
</p><p><a href="../images/d/da/EEGLabImport13.PNG" class="image" title="ERP Image Window"><img src="../images/d/da/EEGLabImport13.PNG" alt="ERP Image Window" width="925" height="546" longdesc="/wiki/index.php/Image:EEGLabImport13.PNG" /></a>
</p><p>To start, enter 5 into the channel box, 1 into smoothing, 1 into downsampling, and the default time 
range (0 to 3746…). To the right of these boxes, make sure that the Plot ERP and Plot Colorbar boxes are 
checked. Next, go to the Inter-trial coherence options, and under frequency enter 10; for the significance level 
enter 0.01, and on the right check the Image Amps box. Finally, at the bottom, enter 0 40 for the Plot 
Spectrum box, and 1250 for the Mark Times box. Press OK, and the following figure is produced: 
</p><p><a href="../images/thumb/8/8c/EEGLabImport14.PNG/400px-EEGLabImport14.PNG" class="image" title="ERP Image for TargetCode = 1"><img src="../images/thumb/8/8c/EEGLabImport14.PNG/400px-EEGLabImport14.PNG" alt="ERP Image for TargetCode = 1" width="400" height="377" longdesc="/wiki/index.php/Image:EEGLabImport14.PNG" /></a> 
</p><p>This shows the amplitude for each trial, the mean response, the ERSP (event-related spectral power), and the 
inter-trial coherence for the condition that the TargetCode = 1. Compare this to TargetCode = 2 (change the 
dataset to #4, and enter the same parameters for the analysis in the ERP Image) as in this figure:
</p><p><a href="../images/thumb/9/91/EEGLabImport15.PNG/400px-EEGLabImport15.PNG" class="image" title="ERP Image for TargetCode = 2"><img src="../images/thumb/9/91/EEGLabImport15.PNG/400px-EEGLabImport15.PNG" alt="ERP Image for TargetCode = 2" width="400" height="311" longdesc="/wiki/index.php/Image:EEGLabImport15.PNG" /></a>
</p><p>There is a very noticeable change in signal amplitude for each condition after the baseline condition, when the cursor appears 
and the control phase of the task begins.
</p>
<a name="Further_Information"></a><h3>Further Information</h3>
<p>This tutorial aimed at getting you started using EEGLAB for analyzing BCI2000 data.
Detailed information on using the EEGLAB software is provided by the EEGLAB tutorial, available at the <a href="http://www.sccn.ucsd.edu/eeglab/" class='external text' title="http://www.sccn.ucsd.edu/eeglab/" rel="nofollow">EEGLAB</a> homepage.
</p>
<div class="printfooter">
</div>

</div><br style="clear:both" />

<div id='footer'><table border="0" cellspacing="0"><tr><td width='152' rowspan='1'>&nbsp;</td><td class='bottom' align='left' valign='top'></td></tr></table>
</div>
</div>

<div id='quickbar'>
<table class="image"><caption align="bottom"><h2>BCI2000 Help</h2></caption><tr><td><a href="BCI2000_Help.html"><img src='../../images/bci2000logo_small.png' height=100 width=100 alt='[BCI2000 Help]' /></a></td></tr></table>
<hr class='sep' /><a href="User_Tutorial%253ABCI2000_Tour.html">Getting Started</a><br />
<a href="User_Reference%253AContents.html">User Manual</a><br />
<ul><li><a href="User_Reference%253AOperator_Module.html">Operator Module</a></li>
<li><a href="User_Reference%253AFilters.html">Configuration Guide</a></li>
<li>Applications</li>
<li>Tools</li>
</ul><a href="Technical_Reference%253AContents.html">Technical Reference</a><br />
<a href="Programming_Reference%253AContents.html">Programming Manual</a><br />
<a href="Contributions%253AContents.html">Contributions</a><br />
<hr class='sep' />
<a href="BCI2000_Glossary.html">BCI2000 Glossary</a><br />
</div>

</body></html>